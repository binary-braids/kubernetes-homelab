apiVersion: v1
kind: ConfigMap
metadata:
  name: kube-prometheus-stack-values
  namespace: flux-system
data:
  values.yaml: |-
    namespaceOverride: monitoring
    windowsMonitoring:
      enabled: true
    prometheus:
      prometheusSpec:
        retentionSize: "500MB"
        storageSpec:
          volumeClaimTemplate:
            spec:
              storageClassName: longhorn
              resources:
                requests:
                  storage: 1Gi
    alertmanager:
      alertmanagerSpec:
        retentionSize: "500MB"
        storage:
          volumeClaimTemplate:
            spec:
              storageClassName: longhorn
              resources:
                requests:
                  storage: 1Gi
    grafana:
      persistence:
        enabled: true
        type: pvc
        accessModes:
          - ReadWriteOnce
        size: 500Mi
        storageClassName: longhorn
